{{##def.event:data:
  <div class="note-column">
  {{? data }}
    {{ var displayNote = data.note ? ( data.note.length === 2 ? data.note.slice(0,1) + '-' + data.note.slice(1) : data.note ) : '---'; }}
    <div class="item note">{{=displayNote}}</div>
    <div class="item instrument">{{=data.instrument || "--"}}</div>
    <div class="item volume">{{=data.volume || "--"}}</div>
    <div class="item panning">{{=data.panning || "--"}}</div>
    <div class="item delay">{{=data.delay || "--"}}</div>
    <div class="item fx">{{=data.fx || "----"}}</div>
  {{?? }}
    <div class="item note">---</div>
    <div class="item instrument">--</div>
    <div class="item volume">--</div>
    <div class="item panning">--</div>
    <div class="item delay">--</div>
    <div class="item fx">----</div>
  {{? }}
  </div>
#}}
<tbody>
  <tr>
    {{ for(var i = 0; i < 7; ++i) { }}
    <td><div class="topPadding"></div></td>
    {{ } }}
  </tr>
  {{ for(var row = 0; row < it.patterns['p1'].rows; row++ ) { }}
  <tr class="row {{=row % 4 ? '' : 'beat-row'}}">
    {{ for(var track in it.tracks) { }}
    <td>
      <div class="line">
        {{ var trackid = it.tracks[track].id; }}
        {{ for(var notecol in it.tracks[track].columns) { }}
          {{ var notecolid = it.tracks[track].columns[notecol].id; }}
          {{? trackid in it.patterns['p1'].trackdata && 
              "notedata" in it.patterns['p1'].trackdata[trackid] &&
              it.patterns['p1'].trackdata[trackid].notedata.length > row &&
              it.patterns['p1'].trackdata[trackid].notedata[row] &&
              notecolid in it.patterns['p1'].trackdata[trackid].notedata[row] }}
            {{ var param = it.patterns['p1'].trackdata[trackid].notedata[row][notecolid]; }}
            {{#def.event:param}}
          {{?? }}
            {{#def.event:null}}
          {{? }}
        {{ } }}
      </div>
    </td>
    {{ } }}
  </tr>
  {{ } }}
  <tr>
    {{ for(var i = 0; i < 7; ++i) { }}
    <td><div class="bottomPadding"></div></td>
    {{ } }}
  </tr>
</tbody>

